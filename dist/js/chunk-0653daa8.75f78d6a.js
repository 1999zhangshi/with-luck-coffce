(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0653daa8"],{"0cb2":function(t,e,r){var a=r("7b0b"),n=Math.floor,i="".replace,o=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,c=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,r,s,u,f){var l=r+t.length,d=s.length,v=c;return void 0!==u&&(u=a(u),v=o),i.call(f,v,(function(a,i){var o;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(l);case"<":o=u[i.slice(1,-1)];break;default:var c=+i;if(0===c)return a;if(c>d){var f=n(c/10);return 0===f?a:f<=d?void 0===s[f-1]?i.charAt(1):s[f-1]+i.charAt(1):a}o=s[c-1]}return void 0===o?"":o}))}},"159b":function(t,e,r){var a=r("da84"),n=r("fdbc"),i=r("17c2"),o=r("9112");for(var c in n){var s=a[c],u=s&&s.prototype;if(u&&u.forEach!==i)try{o(u,"forEach",i)}catch(f){u.forEach=i}}},"17c2":function(t,e,r){"use strict";var a=r("b727").forEach,n=r("a640"),i=n("forEach");t.exports=i?[].forEach:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}},"25f0":function(t,e,r){"use strict";var a=r("6eeb"),n=r("825a"),i=r("d039"),o=r("ad6d"),c="toString",s=RegExp.prototype,u=s[c],f=i((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),l=u.name!=c;(f||l)&&a(RegExp.prototype,c,(function(){var t=n(this),e=String(t.source),r=t.flags,a=String(void 0===r&&t instanceof RegExp&&!("flags"in s)?o.call(t):r);return"/"+e+"/"+a}),{unsafe:!0})},"4d63":function(t,e,r){var a=r("83ab"),n=r("da84"),i=r("94ca"),o=r("7156"),c=r("9bf2").f,s=r("241c").f,u=r("44e7"),f=r("ad6d"),l=r("9f7f"),d=r("6eeb"),v=r("d039"),p=r("69f3").set,g=r("2626"),h=r("b622"),b=h("match"),m=n.RegExp,y=m.prototype,k=/a/g,O=/a/g,C=new m(k)!==k,x=l.UNSUPPORTED_Y,_=a&&i("RegExp",!C||x||v((function(){return O[b]=!1,m(k)!=k||m(O)==O||"/a/i"!=m(k,"i")})));if(_){var E=function(t,e){var r,a=this instanceof E,n=u(t),i=void 0===e;if(!a&&n&&t.constructor===E&&i)return t;C?n&&!i&&(t=t.source):t instanceof E&&(i&&(e=f.call(t)),t=t.source),x&&(r=!!e&&e.indexOf("y")>-1,r&&(e=e.replace(/y/g,"")));var c=o(C?new m(t,e):m(t,e),a?this:y,E);return x&&r&&p(c,{sticky:r}),c},$=function(t){t in E||c(E,t,{configurable:!0,get:function(){return m[t]},set:function(e){m[t]=e}})},S=s(m),w=0;while(S.length>w)$(S[w++]);y.constructor=E,E.prototype=y,d(n,"RegExp",E)}g("RegExp")},"4de4":function(t,e,r){"use strict";var a=r("23e7"),n=r("b727").filter,i=r("1dde"),o=i("filter");a({target:"Array",proto:!0,forced:!o},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},5319:function(t,e,r){"use strict";var a=r("d784"),n=r("825a"),i=r("50c4"),o=r("a691"),c=r("1d80"),s=r("8aa5"),u=r("0cb2"),f=r("14c3"),l=Math.max,d=Math.min,v=function(t){return void 0===t?t:String(t)};a("replace",2,(function(t,e,r,a){var p=a.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,g=a.REPLACE_KEEPS_$0,h=p?"$":"$0";return[function(r,a){var n=c(this),i=void 0==r?void 0:r[t];return void 0!==i?i.call(r,n,a):e.call(String(n),r,a)},function(t,a){if(!p&&g||"string"===typeof a&&-1===a.indexOf(h)){var c=r(e,t,this,a);if(c.done)return c.value}var b=n(t),m=String(this),y="function"===typeof a;y||(a=String(a));var k=b.global;if(k){var O=b.unicode;b.lastIndex=0}var C=[];while(1){var x=f(b,m);if(null===x)break;if(C.push(x),!k)break;var _=String(x[0]);""===_&&(b.lastIndex=s(m,i(b.lastIndex),O))}for(var E="",$=0,S=0;S<C.length;S++){x=C[S];for(var w=String(x[0]),P=l(d(o(x.index),m.length),0),j=[],D=1;D<x.length;D++)j.push(v(x[D]));var R=x.groups;if(y){var T=[w].concat(j,P,m);void 0!==R&&T.push(R);var M=String(a.apply(void 0,T))}else M=u(w,m,P,j,R,a);P>=$&&(E+=m.slice($,P)+M,$=P+w.length)}return E+m.slice($)}]}))},"53ca":function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0");function a(t){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}},5530:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));r("b64b"),r("a4d3"),r("4de4"),r("e439"),r("159b"),r("dbb4");var a=r("ade3");function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){Object(a["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}},7156:function(t,e,r){var a=r("861d"),n=r("d2bb");t.exports=function(t,e,r){var i,o;return n&&"function"==typeof(i=e.constructor)&&i!==r&&a(o=i.prototype)&&o!==r.prototype&&n(t,o),t}},8615:function(t,e,r){},a15b:function(t,e,r){"use strict";var a=r("23e7"),n=r("44ad"),i=r("fc6a"),o=r("a640"),c=[].join,s=n!=Object,u=o("join",",");a({target:"Array",proto:!0,forced:s||!u},{join:function(t){return c.call(i(this),void 0===t?",":t)}})},a640:function(t,e,r){"use strict";var a=r("d039");t.exports=function(t,e){var r=[][t];return!!r&&a((function(){r.call(null,e||function(){throw 1},1)}))}},ade3:function(t,e,r){"use strict";function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,"a",(function(){return a}))},b0b0:function(t,e,r){"use strict";r("8615")},b64b:function(t,e,r){var a=r("23e7"),n=r("7b0b"),i=r("df75"),o=r("d039"),c=o((function(){i(1)}));a({target:"Object",stat:!0,forced:c},{keys:function(t){return i(n(t))}})},bee2:function(t,e,r){"use strict";function a(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}r.d(e,"a",(function(){return n}))},cf2a:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order"},[r("van-tabs",{attrs:{color:"#1989fa","line-height":"3px",sticky:"","title-inactive-color":"#444","title-active-color":"#1989fa",swipeable:!0,animated:!0},on:{change:t.toggleTab},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.tabData,(function(e,a){return r("van-tab",{key:a,attrs:{title:e.title,name:e.name}},[t.orderData.length>0?[r("div",{staticClass:"order-content"},t._l(t.orderData,(function(e,a){return r("div",{key:a,staticClass:"order-item"},[r("div",{staticClass:"item"},[r("div",{staticClass:"order-title clearfix"},[r("span",{staticClass:"fl order-no"},[t._v(t._s(e.oid))]),r("span",{staticClass:"fr order-text clearfix"},[1==e.status?[r("span",{staticClass:"fl conpuit",on:{click:function(r){return t.confirmReceive(e.oid,a)}}},[t._v("确认收货")])]:[r("span",{staticClass:"fl"},[t._v("已完成")]),r("span",{staticClass:"fl delete-icon",on:{click:function(r){return t.removeOrder(e.oid,a)}}},[r("van-icon",{attrs:{name:"delete"}})],1)]],2)]),t._l(e.data,(function(e,a){return r("div",{key:a,staticClass:"clearfix pro-item"},[r("div",{staticClass:"pro-img fl"},[r("img",{staticClass:"auto-img",attrs:{src:e.smallImg,alt:""}})]),r("div",{staticClass:"pro-desc fl"},[r("div",{staticClass:"pro-name"},[r("span",{staticClass:"fl ch-name"},[t._v(t._s(e.name))])]),r("div",{staticClass:"pro-rule"},[t._v(t._s(e.rule))])]),r("div",{staticClass:"pro-info fr"},[r("div",{staticClass:"pro-price"},[t._v(t._s(e.price))]),r("div",{staticClass:"pro-count"},[t._v("x "+t._s(e.count))])])])}))],2),r("div",{staticClass:"item clearfix"},[r("div",{staticClass:"fl order-text order-time"},[t._v(" "+t._s(e.orderTime)+" ")]),r("div",{staticClass:"fr clearfix"},[r("span",{staticClass:"fl text"},[t._v("共计 "+t._s(e.count)+" 件商品 合计：")]),r("span",{staticClass:"fl price"},[t._v("￥"+t._s(e.total))])])]),r("div",{staticClass:"item bottom-item"})])})),0)]:[r("div",[t.isLogin?r("div",{staticClass:"not-order"},[r("div",{staticClass:"not-order-icon"},[r("van-icon",{attrs:{name:"failure"}})],1),r("div",[t._v("暂时没有订单，快去逛逛吧")])]):r("div",{staticClass:"not-order"},[r("div",{staticClass:"login-text",on:{click:t.goPage}},[t._v("点击登陆，查看订单")])])]),r("div",{staticClass:"think"},[r("div",{staticClass:"text"},[t._v("———— 猜你喜欢 ————")]),r("div",{staticClass:"like-box clearfix"},t._l(t.currentProduct,(function(e,a){return r("div",{key:a,class:[a%2==0?"a":"b"],on:{click:function(r){return t.goPage(e.pid)}}},[r("div",[r("img",{staticClass:"auto-img",attrs:{src:e.smallImg}})]),r("div",{staticClass:"title"},[t._v(t._s(e.name))]),r("div",{staticClass:"clearfix"},[r("span",{staticClass:"fl price"},[t._v("￥"+t._s(e.price))])])])})),0)])]],2)})),1)],1)},n=[],i=r("53ca"),o=r("5530"),c=(r("159b"),r("fa7d")),s=r("2f62"),u={name:"Order",data:function(){return{activeName:"0",currentProduct:[]}},computed:Object(o["a"])({isLogin:function(){return this.$store.state.isLogin}},Object(s["b"])("orderModule",["orderData","tabData"])),created:function(){this.getOrder(0),this.getTypeProduct()},methods:{goPage:function(t){"object"==Object(i["a"])(t)?this.$router.push({name:"Login"}):this.$router.push({name:"Detail",params:{pid:t}})},getOrder:function(t){var e=this,r=localStorage.getItem("_t");this.$toast.loading({forbidClick:!0,duration:0,message:"正在加载..."}),this.axios({method:"GET",url:"/findOrder",params:{appkey:this.appkey,tokenString:r,status:t}}).then((function(t){if(e.$toast.clear(),e.$store.commit("changeData",{key:"isLogin",value:700!=t.data.code}),700!=t.data.code){var r=[],a=[];t.data.result.forEach((function(t){-1===a.indexOf(t.oid)&&a.push(t.oid)})),a.forEach((function(e){var a={oid:e,count:0,total:0,data:[]};t.data.result.forEach((function(t){t.oid==e&&(a.data.push(t),a.count+=t.count,a.total+=t.count*t.price)})),a.orderTime=c["a"].formatDate(new Date(a.data[0].createdAt),"yyyy-MM-dd hh:mm:ss"),a.status=a.data[0].status,r.push(a)})),r.sort((function(t,e){return new Date(e.orderTime)-new Date(t.orderTime)})),e.$store.commit("orderModule/changeData",{key:"orderData",value:r})}})).catch((function(t){e.$toast.clear()}))},confirmReceive:function(t,e){var r=this,a=localStorage.getItem("_t");this.$toast.loading({forbidClick:!0,duration:0,message:"正在加载..."}),this.axios({method:"POST",url:"/receive",data:{appkey:this.appkey,tokenString:a,oid:t},transformRequest:c["a"].transformRequest}).then((function(t){r.$toast.clear(),r.orderData[e].status=2,1==r.activeName&&r.$store.commit("orderModule/removeOrderData",e)})).catch((function(t){r.$toast.clear()}))},toggleTab:function(t){this.getOrder(t)},removeOrder:function(t,e){var r=this,a=localStorage.getItem("_t");this.$toast.loading({forbidClick:!0,duration:0,message:"正在加载..."}),this.axios({method:"POST",url:"/removeOrder",data:{appkey:this.appkey,tokenString:a,oid:t},transformRequest:c["a"].transformRequest}).then((function(t){r.$toast.clear(),r.$store.commit("orderModule/removeOrderData",e)})).catch((function(t){r.$toast.clear()}))},getTypeProduct:function(){var t=this,e={appkey:this.appkey,value:1,key:"isHot"};this.$toast.loading({forbidClick:!0,duration:0,message:"正在加载..."}),this.axios({method:"GET",url:"/typeProducts",params:e}).then((function(e){t.$toast.clear(),500==e.data.code&&(t.currentProduct=e.data.result)})).catch((function(e){t.$toast.clear()}))}}},f=u,l=(r("b0b0"),r("2877")),d=Object(l["a"])(f,a,n,!1,null,"3b4e9f46",null);e["default"]=d.exports},d4ec:function(t,e,r){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.d(e,"a",(function(){return a}))},dbb4:function(t,e,r){var a=r("23e7"),n=r("83ab"),i=r("56ef"),o=r("fc6a"),c=r("06cf"),s=r("8418");a({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,r,a=o(t),n=c.f,u=i(a),f={},l=0;while(u.length>l)r=n(a,e=u[l++]),void 0!==r&&s(f,e,r);return f}})},e439:function(t,e,r){var a=r("23e7"),n=r("d039"),i=r("fc6a"),o=r("06cf").f,c=r("83ab"),s=n((function(){o(1)})),u=!c||s;a({target:"Object",stat:!0,forced:u,sham:!c},{getOwnPropertyDescriptor:function(t,e){return o(i(t),e)}})},fa7d:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var a=r("d4ec"),n=r("bee2"),i=(r("159b"),r("a15b"),r("d3b7"),r("25f0"),r("4d63"),r("ac1f"),r("5319"),r("fb6a"),function(){function t(){Object(a["a"])(this,t)}return Object(n["a"])(t,[{key:"transformRequest",value:function(t){var e="";for(var r in t)e+=r+"="+t[r]+"&";return e}},{key:"getCookies",value:function(t,e){var r={};return t.forEach((function(t){r[t]=e.$cookies.get(t)})),r}},{key:"getToken",value:function(t){var e=["t0","t1","t2"],r=[];return e.forEach((function(e){r.push(t.$cookies.get(e))})),r.join(".")}},{key:"formatDate",value:function(t,e){var r=t.getFullYear().toString();if(/(y+)/.test(e)){var a=RegExp.$1;e=e.replace(a,r.slice(r.length-a.length))}var n={M:t.getMonth()+1,d:t.getDate(),h:t.getHours(),m:t.getMinutes(),s:t.getSeconds()};for(var i in n){var o=new RegExp("(".concat(i,"{1,2})"));if(o.test(e)){var c=RegExp.$1,s=n[i]>=10||1==c.length?n[i]:"0"+n[i];e=e.replace(c,s)}}return e}}]),t}()),o=new i}}]);
//# sourceMappingURL=chunk-0653daa8.75f78d6a.js.map