(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8ae4ed1e"],{"0cb2":function(t,e,n){var r=n("7b0b"),a=Math.floor,o="".replace,i=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,c,u,f){var l=n+t.length,d=c.length,h=s;return void 0!==u&&(u=r(u),h=i),o.call(f,h,(function(r,o){var i;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(l);case"<":i=u[o.slice(1,-1)];break;default:var s=+o;if(0===s)return r;if(s>d){var f=a(s/10);return 0===f?r:f<=d?void 0===c[f-1]?o.charAt(1):c[f-1]+o.charAt(1):r}i=c[s-1]}return void 0===i?"":i}))}},"159b":function(t,e,n){var r=n("da84"),a=n("fdbc"),o=n("17c2"),i=n("9112");for(var s in a){var c=r[s],u=c&&c.prototype;if(u&&u.forEach!==o)try{i(u,"forEach",o)}catch(f){u.forEach=o}}},"17c2":function(t,e,n){"use strict";var r=n("b727").forEach,a=n("a640"),o=a("forEach");t.exports=o?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"25f0":function(t,e,n){"use strict";var r=n("6eeb"),a=n("825a"),o=n("d039"),i=n("ad6d"),s="toString",c=RegExp.prototype,u=c[s],f=o((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),l=u.name!=s;(f||l)&&r(RegExp.prototype,s,(function(){var t=a(this),e=String(t.source),n=t.flags,r=String(void 0===n&&t instanceof RegExp&&!("flags"in c)?i.call(t):n);return"/"+e+"/"+r}),{unsafe:!0})},"305b":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"secure"},[n("van-nav-bar",{attrs:{title:"安全中心","left-text":"返回","left-arrow":"",fixed:!0},on:{"click-left":t.back}}),n("div",{staticClass:"btns"},[n("van-button",{attrs:{type:"default",block:""},on:{click:t.showActionSheet}},[t._v("修改密码")]),n("van-button",{staticClass:"destroy",attrs:{type:"default",block:""},on:{click:t.destroyAccount}},[t._v("注销账号")]),n("van-button",{staticClass:"destroy",attrs:{type:"info",size:"large"},on:{click:t.logout}},[t._v("退出登陆")])],1),n("van-action-sheet",{attrs:{title:"修改密码"},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[n("van-form",{on:{submit:t.updatePassword}},[n("van-field",{attrs:{type:"text",name:"旧密码",label:"旧密码",placeholder:"旧密码"},model:{value:t.userInfo.oldPassword,callback:function(e){t.$set(t.userInfo,"oldPassword",e)},expression:"userInfo.oldPassword"}}),n("van-field",{attrs:{type:"text",name:"新密码",label:"新密码",placeholder:"新密码"},model:{value:t.userInfo.password,callback:function(e){t.$set(t.userInfo,"password",e)},expression:"userInfo.password"}}),n("div",{staticStyle:{margin:"16px"}},[n("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("提交")])],1)],1)],1)],1)},a=[],o=n("cc73"),i=n("fa7d"),s={name:"Secure",data:function(){return{isShow:!1,userInfo:{oldPassword:"",password:""}}},created:function(){this.isLogin||this.$router.push({name:"Login"})},computed:{isLogin:function(){return this.$store.state.isLogin}},methods:{back:function(){this.$router.go(-1)},showActionSheet:function(){this.isShow=!0},updatePassword:function(){var t=this;if(o["a"].validForm(this.userInfo,this)){if(this.userInfo.password==this.userInfo.oldPassword)return void this.$toast("新密码不能和旧密码一样");var e=localStorage.getItem("_t");this.$toast.loading({forbidClick:!0,duration:0,message:"正在修改并退出..."}),this.axios({method:"POST",url:"/updatePassword",data:{appkey:this.appkey,tokenString:e,oldPassword:this.userInfo.oldPassword,password:this.userInfo.password},transformRequest:i["a"].transformRequest}).then((function(e){t.$toast.clear(),"E001"===e.data.code?(t.isShow=!1,t.$store.state.isLogin=!1,localStorage.removeItem("_t"),t.$store.commit("changeData",{key:"isLogin",value:!1}),t.$router.push({name:"Login"})):t.$toast(e.data.msg)})).catch((function(e){t.$toast.clear()}))}},logout:function(){var t=this,e=localStorage.getItem("_t");this.$toast.loading({forbidClick:!0,duration:0,message:"正在退出登陆..."}),this.axios({method:"POST",url:"/logout",data:{appkey:this.appkey,tokenString:e},transformRequest:i["a"].transformRequest}).then((function(e){t.$toast.clear(),t.$store.commit("changeData",{key:"isLogin",value:!1}),localStorage.removeItem("_t"),t.$router.push({name:"Login"})})).catch((function(t){}))},destroyAccount:function(){var t=this;this.$dialog.confirm({title:"注销账号",message:"再次确认是否需要注销账号，一旦注销则不可恢复"}).then((function(e){if("confirm"==e){var n=localStorage.getItem("_t");t.$toast.loading({forbidClick:!0,duration:0,message:"正在注销..."}),t.axios({method:"POST",url:"/destroyAccount",data:{appkey:t.appkey,tokenString:n},transformRequest:i["a"].transformRequest}).then((function(e){t.$toast.clear(),t.$store.commit("changeData",{key:"isLogin",value:!1}),localStorage.removeItem("_t"),t.$router.push({name:"Login"})})).catch((function(t){}))}})).catch((function(t){}))}}},c=s,u=(n("6a32"),n("2877")),f=Object(u["a"])(c,r,a,!1,null,"74910fb0",null);e["default"]=f.exports},"4d63":function(t,e,n){var r=n("83ab"),a=n("da84"),o=n("94ca"),i=n("7156"),s=n("9bf2").f,c=n("241c").f,u=n("44e7"),f=n("ad6d"),l=n("9f7f"),d=n("6eeb"),h=n("d039"),g=n("69f3").set,v=n("2626"),p=n("b622"),m=p("match"),b=a.RegExp,w=b.prototype,y=/a/g,k=/a/g,$=new b(y)!==y,S=l.UNSUPPORTED_Y,E=r&&o("RegExp",!$||S||h((function(){return k[m]=!1,b(y)!=y||b(k)==k||"/a/i"!=b(y,"i")})));if(E){var x=function(t,e){var n,r=this instanceof x,a=u(t),o=void 0===e;if(!r&&a&&t.constructor===x&&o)return t;$?a&&!o&&(t=t.source):t instanceof x&&(o&&(e=f.call(t)),t=t.source),S&&(n=!!e&&e.indexOf("y")>-1,n&&(e=e.replace(/y/g,"")));var s=i($?new b(t,e):b(t,e),r?this:w,x);return S&&n&&g(s,{sticky:n}),s},I=function(t){t in x||s(x,t,{configurable:!0,get:function(){return b[t]},set:function(e){b[t]=e}})},P=c(b),R=0;while(P.length>R)I(P[R++]);w.constructor=x,x.prototype=w,d(a,"RegExp",x)}v("RegExp")},5319:function(t,e,n){"use strict";var r=n("d784"),a=n("825a"),o=n("50c4"),i=n("a691"),s=n("1d80"),c=n("8aa5"),u=n("0cb2"),f=n("14c3"),l=Math.max,d=Math.min,h=function(t){return void 0===t?t:String(t)};r("replace",2,(function(t,e,n,r){var g=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,v=r.REPLACE_KEEPS_$0,p=g?"$":"$0";return[function(n,r){var a=s(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,a,r):e.call(String(a),n,r)},function(t,r){if(!g&&v||"string"===typeof r&&-1===r.indexOf(p)){var s=n(e,t,this,r);if(s.done)return s.value}var m=a(t),b=String(this),w="function"===typeof r;w||(r=String(r));var y=m.global;if(y){var k=m.unicode;m.lastIndex=0}var $=[];while(1){var S=f(m,b);if(null===S)break;if($.push(S),!y)break;var E=String(S[0]);""===E&&(m.lastIndex=c(b,o(m.lastIndex),k))}for(var x="",I=0,P=0;P<$.length;P++){S=$[P];for(var R=String(S[0]),_=l(d(i(S.index),b.length),0),A=[],L=1;L<S.length;L++)A.push(h(S[L]));var O=S.groups;if(w){var C=[R].concat(A,_,b);void 0!==O&&C.push(O);var j=String(r.apply(void 0,C))}else j=u(R,b,_,A,O,r);_>=I&&(x+=b.slice(I,_)+j,I=_+R.length)}return x+b.slice(I)}]}))},"56d8":function(t,e,n){},"6a32":function(t,e,n){"use strict";n("56d8")},7156:function(t,e,n){var r=n("861d"),a=n("d2bb");t.exports=function(t,e,n){var o,i;return a&&"function"==typeof(o=e.constructor)&&o!==n&&r(i=o.prototype)&&i!==n.prototype&&a(t,i),t}},a15b:function(t,e,n){"use strict";var r=n("23e7"),a=n("44ad"),o=n("fc6a"),i=n("a640"),s=[].join,c=a!=Object,u=i("join",",");r({target:"Array",proto:!0,forced:c||!u},{join:function(t){return s.call(o(this),void 0===t?",":t)}})},a640:function(t,e,n){"use strict";var r=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},bee2:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return a}))},cc73:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("d4ec"),a=n("bee2"),o=function(){function t(){Object(r["a"])(this,t),this.phone={reg:/^1[3456789]\d{9}$/,msg:"请填写正确的手机号"},this.nickName={reg:/^[0-9a-zA-Z\u4e00-\u9fa5]{1,8}$/,msg:"用户名需含有1-8位数字，字母，汉字的组合"},this.password={reg:/^[a-zA-Z][^\u4e00-\u9fa5]{5,15}$/,msg:"密码为6-16位字符，首个字符必须是字母且不能含有汉字"},this.oldPassword={reg:/^[a-zA-Z][^\u4e00-\u9fa5]{5,15}$/,msg:"旧密码为6-16位字符，首个字符必须是字母且不能含有汉字"},this.email={reg:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,msg:"邮箱格式不正确"}}return Object(a["a"])(t,[{key:"validForm",value:function(t,e){for(var n in t)if(!this[n].reg.test(t[n]))return e.$toast(this[n].msg),!1;return!0}}]),t}(),i=new o},d4ec:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},fa7d:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("d4ec"),a=n("bee2"),o=(n("159b"),n("a15b"),n("d3b7"),n("25f0"),n("4d63"),n("ac1f"),n("5319"),n("fb6a"),function(){function t(){Object(r["a"])(this,t)}return Object(a["a"])(t,[{key:"transformRequest",value:function(t){var e="";for(var n in t)e+=n+"="+t[n]+"&";return e}},{key:"getCookies",value:function(t,e){var n={};return t.forEach((function(t){n[t]=e.$cookies.get(t)})),n}},{key:"getToken",value:function(t){var e=["t0","t1","t2"],n=[];return e.forEach((function(e){n.push(t.$cookies.get(e))})),n.join(".")}},{key:"formatDate",value:function(t,e){var n=t.getFullYear().toString();if(/(y+)/.test(e)){var r=RegExp.$1;e=e.replace(r,n.slice(n.length-r.length))}var a={M:t.getMonth()+1,d:t.getDate(),h:t.getHours(),m:t.getMinutes(),s:t.getSeconds()};for(var o in a){var i=new RegExp("(".concat(o,"{1,2})"));if(i.test(e)){var s=RegExp.$1,c=a[o]>=10||1==s.length?a[o]:"0"+a[o];e=e.replace(s,c)}}return e}}]),t}()),i=new o}}]);
//# sourceMappingURL=chunk-8ae4ed1e.28e4b7a4.js.map